// Buzzhive XGBoost Queen Status Detector
// Accuracy: 78.8% | F1: 0.787
// Input: 78 MFCC features | Output: 4 classes

#ifndef BUZZHIVE_ML_H
#define BUZZHIVE_ML_H

#define NUM_FEATURES 78
#define NUM_CLASSES 4

typedef enum {
    QUEENRIGHT = 0,
    QUEENLESS = 1,
    QUEEN_HATCHED = 2,
    QUEEN_ACCEPTED = 3
} QueenStatus;

static const char* STATUS_NAMES[] = {"Queenright", "Queenless", "Queen_Hatched", "Queen_Accepted"};

// Scaler: mean values
static const float MEAN[78] = {
    -135.629601f, 112.126449f, -60.313058f, 64.117294f, -59.801513f, 42.629534f, -37.784331f, 25.200443f, -20.739708f, 0.071463f, -3.982364f, -15.012337f, 7.676654f, -0.076139f, 0.066137f, -0.050452f, 0.044633f, -0.043181f, 0.030876f, -0.028218f, 0.018086f, -0.014636f, 0.001988f, -0.002286f, -0.008167f, 0.005756f, 0.039057f, -0.068526f, 0.058255f, -0.052407f, 0.047871f, -0.037473f, 0.030588f, -0.021881f, 0.014052f, -0.004457f, -0.000310f, 0.007968f, -0.009755f, 13.165980f, 8.322936f, 7.684127f, 6.668399f, 6.045645f, 5.235078f, 4.695346f, 4.085761f, 3.679722f, 3.360049f, 3.239311f, 3.285951f, 3.292644f, 2.004628f, 1.454777f, 1.359644f, 1.189201f, 1.066255f, 0.933972f, 0.820030f, 0.717090f, 0.629279f, 0.568353f, 0.547577f, 0.552209f, 0.565227f, 1.488819f, 1.077275f, 0.991399f, 0.883301f, 0.795448f, 0.699525f, 0.621603f, 0.549685f, 0.487617f, 0.445154f, 0.432438f, 0.436872f, 0.444152f
};

// Scaler: scale values
static const float SCALE[78] = {
    121.750309f, 16.478685f, 8.584045f, 7.806817f, 5.475777f, 6.324040f, 4.674656f, 5.502844f, 3.838289f, 3.725180f, 3.752617f, 2.915297f, 2.490348f, 0.157229f, 0.039382f, 0.037059f, 0.032676f, 0.027795f, 0.026613f, 0.020808f, 0.018109f, 0.015133f, 0.015027f, 0.013209f, 0.012838f, 0.013396f, 0.055141f, 0.027537f, 0.026627f, 0.022986f, 0.019993f, 0.018923f, 0.014929f, 0.012954f, 0.010010f, 0.009160f, 0.008392f, 0.007886f, 0.008745f, 10.298036f, 4.225557f, 3.455673f, 3.054595f, 2.704086f, 2.153725f, 1.644350f, 1.079600f, 0.656780f, 0.443269f, 0.313703f, 0.351888f, 0.382172f, 1.301837f, 0.844142f, 0.752027f, 0.666890f, 0.593278f, 0.475932f, 0.362665f, 0.248509f, 0.148096f, 0.095102f, 0.070444f, 0.076888f, 0.093839f, 1.032021f, 0.622583f, 0.544185f, 0.481545f, 0.424410f, 0.335573f, 0.260069f, 0.172288f, 0.104255f, 0.065991f, 0.049962f, 0.054682f, 0.064797f
};

inline void normalize(const float* raw, float* norm) {
    for (int i = 0; i < 78; i++) norm[i] = (raw[i] - MEAN[i]) / SCALE[i];
}

#endif
